{% extends 'components/lista_base.html' %}

{% with page_title='Métodos de Pago' breadcrumb_active='Métodos de Pago' card_title='Gestión de Métodos de Pago' create_url='catalogos:metodos_pago_crear' create_button_text='Nuevo Método de Pago' item_name='método' item_name_plural='métodos de pago' empty_message='Comienza agregando los métodos de pago que aceptarás en tu sistema.' create_first_text='Crear Primer Método de Pago' table_id='tabla-metodos' %}

{% block breadcrumb_items %}
<!-- nosonar: S5254 - Este <li> se renderiza dentro de <ol class="breadcrumb"> del template base -->
<li class="breadcrumb-item"><a href="{% url 'catalogos:index' %}">Catálogos</a></li>
{% endblock %}

{% block header_icon %}credit-card{% endblock %}

{% block filtros %}
{% include 'catalogos/includes/filtros_catalogo.html' with filtro_tipo_options=tipo_metodo_options table_id='tabla-metodos' %}
{% endblock %}

{% block table_headers %}
<th scope="col">Código</th>
<th scope="col">Nombre</th>
<th scope="col">Tipo</th>
<th scope="col">Requiere Ref.</th>
<th scope="col">Estado</th>
<th scope="col">Acciones</th>
{% endblock %}

{% block table_body %}
{% for metodo in object_list %}
<tr data-tipo="{{ metodo.tipo_metodo }}" data-activo="{{ metodo.activo }}">
    <td><strong>{{ metodo.codigo }}</strong></td>
    <td>{{ metodo.nombre }}</td>
    <td>
        <span class="badge 
            {% if metodo.tipo_metodo == 'EFECTIVO' %}bg-success
            {% elif metodo.tipo_metodo == 'TRANSFERENCIA' %}bg-primary
            {% elif metodo.tipo_metodo == 'CHEQUE' %}bg-info
            {% elif metodo.tipo_metodo == 'TARJETA_CREDITO' %}bg-warning
            {% elif metodo.tipo_metodo == 'TARJETA_DEBITO' %}bg-secondary
            {% elif metodo.tipo_metodo == 'CONSIGNACION' %}bg-dark
            {% else %}bg-light text-dark{% endif %}">
            {{ metodo.get_tipo_metodo_display }}
        </span>
    </td>
    <td class="text-center">
        {% if metodo.requiere_referencia %}
            <i class="bi bi-check-circle text-success" title="Sí"></i>
        {% else %}
            <i class="bi bi-x-circle text-danger" title="No"></i>
        {% endif %}
    </td>
    <td>
        {% if metodo.activo %}
            <span class="badge bg-success">Activo</span>
        {% else %}
            <span class="badge bg-danger">Inactivo</span>
        {% endif %}
    </td>
    <td>
        {% include 'catalogos/includes/acciones_lista.html' with item=metodo detail_url=metodo.get_absolute_url edit_url=metodo.get_edit_url delete_url=metodo.get_delete_url item_name=metodo.nombre %}
    </td>
</tr>
{% endfor %}
{% endblock %}

{% endwith %}
